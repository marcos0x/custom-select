(function(a){a.fn.extend({customSelect:function(e){var f=0,g=300;e=a.extend(!0,{caret:!0},e);return this.each(function(){f++;var h="customselect_"+f,c=a(this),j=a("option:selected",c).text(),k=void 0!=c.attr("class")?c.attr("class").replace(/custom-select/,""):"";c.removeAttr("class").wrap('<div class="custom-select '+k+'" id="'+h+'"></div>');var d="";a.each(c.find("option"),function(){d="options-group"==a(this).attr("name")?d+('<li class="options-group">'+a(this).text()+"</li>"):"sub-option"==a(this).attr("name")?
d+('<li class="sub-option"><a href="#" data-value="'+a(this).val()+'">'+a(this).text()+"</a></li>"):d+('<li><a href="#" data-value="'+a(this).val()+'">'+a(this).text()+"</a></li>")});var b=a("#"+h);b.css("z-index",g);b.append('<div class="custom-select-main"></div>');b.find(".custom-select-main").append('<a href="#" class="current"><span class="value">'+j+'</span> <span class="caret"></span></a>');b.find(".custom-select-main").append('<div class="options" style="display:none"><ul>'+d+"</ul></div>");
e.caret||a("a.current .caret",b).remove();a("a.current",b).click(function(){a(".custom-select").not(b).find(".options:visible").parents(".custom-select").find("a.current").click();a(".options",b).slideToggle("fast");return!1});a(".options a",b).click(function(){a("a.current span.value",b).html(a(this).html());a("option",c).removeAttr("selected");a('option[value="'+a(this).attr("data-value")+'"]',c).prop("selected",!0);a(".options",b).slideUp("fast");c.val(a(this).attr("data-value")).trigger("change").trigger("select").blur();
return!1});a("body").click(function(){a(".options",b).slideUp("fast")});b.click(function(a){a.stopPropagation()});c.hide();g--})}})})(jQuery);